<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "//www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="//www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Ebook</title>
<link type="text/css" rel="StyleSheet" href="css/ui.css" />
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script type="text/javascript" src="js/ui.js"></script>
</head>
<body>

<!-- 이미지 뷰어 -->
<div id="viewer" class="viewer">

	<!-- Head -->
	<div id="head_line">
		<div id="head_explain">
			<!-- 압축 폴더별 타이틀 -->
			<div class="title_menu">
				<p class="title">
					<a href="#js_book_number">
						<span></span>
					</a>
					<span class="title_arrow"><img src="image/ebook_listView_off.png" alt="" /></span>
				</p>
				<!-- 만화 회 레이어 -->
				<div id="js_book_number" class="book_number">
					<div class="book_number_in">
						<ul class="list">

						</ul>
						<!-- 목록이 없을때 -->
						<p class="no_data">목록이 없습니다.</p>
					</div>
				</div>
				<!-- //만화 회 레이어 -->
			</div>
			<!--/div-->
			<!-- //압축 폴더별 타이틀 -->

			<!-- 상단 버튼 영역 -->
			<p class="button">
				<a href="#" class="btn_full"><img src="image/ebook_ico_full_off.png" alt="FULL" /></a>
				<a href="#" class="btn_bookmark"><img src="image/ebook_ico_bookmark_off.png" alt="책갈피" /></a>
				<a href="#" class="btn_landscapeView"><img src="image/ebook_ico_view_on.png" alt="세로뷰" /></a>
				<a href="#js_setting_wrap" class="btn_viewerSettings"><img src="image/ebook_ico_viewerSettings.png" alt="뷰어설정" /></a>
			</p>
			<!-- //상단 버튼 영역 -->

			<!-- 설정창 -->
			<div id="js_setting_wrap" class="setting_wrap">
				<div class="setting_wrap_in">
					<p class="stt_title"><img src="image/ebook_title_flipSetting.gif" alt="자동넘김 설정" /></p>
					<ul class="stt_list js_auto_input">
						<li class="left">
							<input type="radio" id="cnt_setupSd1" name="cnt_setupSd" class="input-radio" value="0">
							<label for="cnt_setupSd1">설정안함</label>
						</li>
						<li class="right">
							<input type="radio" id="cnt_setupSd2" name="cnt_setupSd" class="input-radio" value="3">
							<label for="cnt_setupSd2">3초</label>
						</li>
						<li class="left">
							<input type="radio" id="cnt_setupSd3" name="cnt_setupSd" class="input-radio" value="7">
							<label for="cnt_setupSd3">7초</label>
						</li>
						<li class="right">
							<input type="radio" id="cnt_setupSd4" name="cnt_setupSd" class="input-radio" value="14">
							<label for="cnt_setupSd4">14초</label>
						</li>
					</ul>
					<p class="stt_title">
						<img src="image/ebook_title_flipOrder.gif" alt="페이지 넘김순서 * 역순보기는 1장 보기에만 적용됩니다." />
						<a href="#" id="js_guideLayer" class="button"><img src="image/ebook_btn_guide.gif" alt="역순보기 안내"></a>
					</p>
					<ul class="stt_list js_order_input">
						<li class="left">
							<input type="radio" id="cnt_setupOd1" name="cnt_setupOd_align" class="input-radio">
							<label for="cnt_setupOd1">기본설정</label>
						</li>
						<li class="right">
							<input type="radio" id="cnt_setupOd2" name="cnt_setupOd_align" class="input-radio">
							<label for="cnt_setupOd2">역순보기</label>
						</li>
					</ul>
					<ul class="stt_list stt_list_none js_view_input">
						<li class="left">
							<input type="radio" id="cnt_setupView1" name="cnt_setupView" class="input-radio">
							<label for="cnt_setupView1">1장 보기</label>
						</li>
						<li class="right">
							<input type="radio" id="cnt_setupView2" name="cnt_setupView" class="input-radio">
							<label for="cnt_setupView2">2장 보기</label>
						</li>
					</ul>
					<p class="stt_title"><img src="image/ebook_title_setBackgroundColor.gif" alt="배경색 설정" /></p>
					<ul class="bgcolor_selc js_bgcolor_selc">
						<li class="btn_white"><a href="#"><img src="image/ebook_btn_white_off.gif" alt="흰색" /></a></li>
						<li class="btn_gray"><a href="#"><img src="image/ebook_btn_gray_off.gif" alt="회색" /></a></li>
						<li class="btn_black"><a href="#"><img src="image/ebook_btn_black_off.gif" alt="검정" /></a></li>
					</ul>
					<p class="stt_title"><img src="image/ebook_title_shortcutKeyGuide.gif" alt="단축키 안내" /></p>
					<p class="shortcuts_img"><img src="image/ebook_img_shortcuts.gif" alt="" /></p>
				</div>
			</div>
			<!-- //설정창 -->
		</div>
	</div>
	<!-- //Head -->

	<!-- 책갈피 -->
	<p class="photo_bookmark"><img src="image/ebook_ico_bookmark_big.png" alt="책갈피" /></p>
	<!-- //책갈피 -->

	<!-- Content -->
	<div class="viewer_container">
		<div id="content_visual" class="content_wrap">
			<div class="content_wrap_in">

			</div>
		</div>
		<a href="#" id="js_all_button" class="content_button"></a>
	</div>
	<!-- //Content -->

	<!-- 페이징 -->
	<p class="photo_paging"></p>
	<!-- //페이징 -->

	<!-- menu -->
	<div id="viewer_menu">
		<div class="viewer_menu_in">
			<div class="paging_counting">
				<div class="paging_counting_in">
					<div class="ui-slider">
						<input type="text" class="input-range ui-slider-input" name="slider" value="1" min="0" max="100" data-highlight="true" />
						<div id="slider-range-min" class="ui-slider-track ui-shadow-inset ui-bar-inherit ui-corner-all"></div>
					</div>
					<p class="input_paging"></p>
				</div>
			</div>
			<a href="#" class="btn_previous"><img src="image/ebook_ico_previous.png" alt="이전 회" /></a>
			<a href="#" class="btn_nextTime"><img src="image/ebook_ico_nextTime.png" alt="다음 회" /></a>
		</div>
	</div>
	<!-- //menu -->

	<!-- 이미지 마지막 페이지 -->
	<div class="viewer_last_page">
		<div class="viewer_last_page_in viewer_nextview_true">
			<p class="msg">마지막 페이지입니다.<br>다음회로 이동하시겠습니까?</p>
			<p class="button">
				<a href="#" class="btn_confirm">확인</a>
				<a href="#" class="btn_cancel">취소</a>
			</p>
		</div>
		<div class="viewer_last_page_in viewer_nextview_false">
			<p class="msg">마지막 페이지 입니다.<br>다음회가 없습니다.</p>
			<p class="button">
				<a href="#" class="btn_cancel btn_cel_confirm">확인</a>
			</p>
		</div>
		<div class="viewer_last_page_in viewer_direct_true">
			<p class="msg"><span class="moveMsg">다음</span>회로 이동하시겠습니까?</p>
			<p class="button">
				<a href="#" class="btn_confirm">확인</a>
				<a href="#" class="btn_cancel">취소</a>
			</p>
		</div>
		<div class="viewer_last_page_in viewer_direct_false">
			<p class="msg"><span class="moveMsg">다음</span>회가 없습니다.</p>
			<p class="button">
				<a href="#" class="btn_cancel btn_cel_confirm">확인</a>
			</p>
		</div>
	</div>
	<!-- //이미지 마지막 페이지 -->

	<!-- 로딩바 -->
	<div id="loading" class="loading_bar">
	    <img src="image/loading_bar1.png" alt="">
	    <img src="image/loading_bar2.png" alt="">
	    <img src="image/loading_bar3.png" alt="">
	    <img src="image/loading_bar4.png" alt="">
	    <img src="image/loading_bar5.png" alt="">
	    <img src="image/loading_bar6.png" alt="">
	    <img src="image/loading_bar7.png" alt="">
	    <img src="image/loading_bar8.png" alt="">
	    <img src="image/loading_bar9.png" alt="">
	    <img src="image/loading_bar10.png" alt="">
	    <img src="image/loading_bar11.png" alt="">
	    <img src="image/loading_bar12.png" alt="">
	    <img src="image/loading_bar13.png" alt="">
	    <img src="image/loading_bar14.png" alt="">
	    <img src="image/loading_bar15.png" alt="">
	    <img src="image/loading_bar16.png" alt="">
	    <img src="image/loading_bar17.png" alt="">
	    <img src="image/loading_bar18.png" alt="">
	</div>
	<div id="loading_bg" class="loading_bar_bg"></div><!-- 로딩바 배경 -->
	<!-- //로딩바 -->
</div>
<!-- 이미지 뷰어 -->

<!-- 안내 가이드 레이어 -->
<div id="js-layer-guide" class="layer_guide">
	<img class="guide_img" src="image/ebook_layer_guide.png" alt="">
	<p class="btn_close"><a href="#"><img src="image/ebook_layer_guide_button.png" alt=""></a></p>
</div>
<!-- //안내 가이드 레이어 -->

<script type="text/javascript">
// Ebook 뷰어 데이터 객체
var comicData = {
	"code" : "SUCCESS",
	"userid" : "jk9804034",
	"app_version" : "",
	"title" : "세상에서 가장 이쁜 사진",
	"cate" : "CTN",
	"bookmark" : "",
	"folder_name" : "세상에서 가장 이쁜 사진",
	"contents_name" : "완결★ 최강의 종족이 인간이었던 건 1~7권[번역] 완",
	"auto_pass" : "0",
	"page_no" : "0",
	"pass_way" : "1",
	"pass_division" : "1",
	"adjust" : "W",
	"background" : "G",
	"prev_link" : "",
	"next_link" : "/API/ebook/filelist.php?idx=86565785&type=web&folder_name=%C3%D6%B0%AD%C0%C7+%C1%BE%C1%B7%C0%CC+%C0%CE%B0%A3%C0%CC%BE%FA%B4%F8+%B0%C7+10-55%C8%AD",
	"file_list" : [
		"image/filelist/img1.jpg",
		"image/filelist/img2.jpg",
		"image/filelist/img3.jpg",
		"image/filelist/img4.jpg",
		"image/filelist/img5.jpg",
		"image/filelist/img6.jpg",
		"image/filelist/img7.jpg",
		"image/filelist/img8.jpg",
		"image/filelist/img9.jpg",
		"image/filelist/img10.jpg",
		"image/filelist/img11.jpg",
		"image/filelist/img12.jpg",
		"image/filelist/img13.jpg",
		"image/filelist/img14.jpg",
		"image/filelist/img15.jpg",
		"image/filelist/img16.jpg",
		"image/filelist/img17.jpg",
		"image/filelist/img18.jpg",
		"image/filelist/img19.jpg",
		"image/filelist/img20.jpg",
		"image/filelist/img21.jpg",
		"image/filelist/img22.jpg",
		"image/filelist/img23.jpg",
		"image/filelist/img24.jpg",
		"image/filelist/img25.jpg",
		"image/filelist/img26.jpg",
		"image/filelist/img27.jpg",
		"image/filelist/img28.jpg",
		"image/filelist/img29.jpg",
		"image/filelist/img30.jpg",
	],
	"folder_list" : [
		{
			"title" : "세상에서 가장 이쁜 사진1",
			"link" : "/API/ebook/filelist.php?idx=86565785&type=web&folder_name=%C3%D6%B0%AD%C0%C7+%C1%BE%C1%B7%C0%CC+%C0%CE%B0%A3%C0%CC%BE%FA%B4%F8+%B0%C7+01-9%C8%AD"
		},
		{
			"title" : "세상에서 가장 이쁜 사진2",
			"link" : "/API/ebook/filelist.php?idx=86565785&type=web&folder_name=%C3%D6%B0%AD%C0%C7+%C1%BE%C1%B7%C0%CC+%C0%CE%B0%A3%C0%CC%BE%FA%B4%F8+%B0%C7+10-55%C8%AD"
		},
		{
			"title" : "세상에서 가장 이쁜 사진3",
			"link" : "/API/ebook/filelist.php?idx=86565785&type=web&folder_name=%C3%D6%B0%AD%C0%C7+%C1%BE%C1%B7%C0%CC+%C0%CE%B0%A3%C0%CC%BE%FA%B4%F8+%B0%C7+56-62%C8%AD%2C"
		},
		{
			"title" : "세상에서 가장 이쁜 사진4",
			"link" : "/API/ebook/filelist.php?idx=86565785&type=web&folder_name=%C3%D6%B0%AD%C0%C7+%C1%BE%C1%B7%C0%CC+%C0%CE%B0%A3%C0%CC%BE%FA%B4%F8+%B0%C7+63%C8%AD"
		}
	],
	"contents_list" : [
		{
			"title" : "완결★ 최강의 종족이 인간이었던 건 1~7권[번역] 완",
			"link" : "/API/ebook/filelist.php?idx=86565785&type=web&hash=df37c7bfccc636fba505fa8f44fee006_314655429"
		}
	]
};

// Ebook 뷰어 스크립트
function Viewer(op){
	this.$container = op.node; // 전체 영역
	this.$head = this.$container.find("#head_explain"); // 상단 메뉴
	this.$bookmark = this.$container.find(".photo_bookmark"); // 북마크
	this.$content = this.$container.find("#content_visual"); // 리스트 영역
	this.$paging = this.$container.find(".photo_paging"); // 리스트 페이징
	this.$menu = this.$container.find("#viewer_menu"); // 하단 페이징
	this.$screenWidth = ( navigator.userAgent.toLowerCase().indexOf(".net4.0c") != -1 ) ? 1006 : 1000; // 초기 가로사이즈
	this.$screenHeight = ( navigator.userAgent.toLowerCase().indexOf(".net4.0c") != -1 ) ? 808 : 800; // 초기 세로사이즈
	this.$realImgWidth = null; // 이미지 원본 가로사이즈
	this.$realImgHeight = null; // 이미지 원본 세로사이즈
	this.$initImgWidth = null; // 초기 리사이즈 가로사이즈
	this.$initImgHeight = null; // 초기 리사이즈 세로사이즈
	this.$imgForms = null; // 이미지 형식
	this.$imgWidth = null; // 이미지 가로 사이즈
	this.$imgHeight = null; // 이미지 세로 사이즈
	this.$timer = null; // 시간 타이머
	this.$loadingTimer = null; // 로딩 시간 타이머
	this.$popupSize = false; // 전체화면 여부
	this.$length = null; // 회차별 이미지 총 갯수
	this.$course = "next"; // 방향
	this.clearInterFlag = null; // 전체 사이즈 지정 여부

	// 이미지 총 갯수 저장
	this.$length = op.data.file_list.length;

	// 화면을 만들어 내기위한 데이터 객체
	this.dataList = op.data;	

	// 초기 데이터 로드
	this.dataLoad();
}
// 데이터 로드
Viewer.prototype.dataLoad = function(){
	// 로딩실행
	this.loadingBar({ active : "show" });

	// 초기 실행
	this.gnbMenu( this.dataList );
}
// 셀렉트 메뉴
Viewer.prototype.gnbMenu = function(value){
	// 다중 압축 파일이 있을경우
	if( value.contents_list && value.contents_list.length > 1 ){
		if( this.$head.find(".title_menu").hasClass(".title_category") ){
			this.$head.find(".title_menu").remove();
		}
		if( $("#js_book_number .list li").length ){
			$("#js_book_number .list li").remove();
		}
		// 기존에 존재한 타이틀영역에 클래스 추가
		this.$head.find(".title_menu").addClass("title_folder");

		// 다중압축파일 타이틀영역 생성
		var titleCategory = $("<div></div>").addClass("title_menu title_category")
			.append(
				$("<p></p>").addClass("title")
					.append(
						$("<a></a>", { href : "#js_book_title", title : value.contents_name })
							.append(
								$("<span></span>").text(value.contents_name)
							)
					)
					.append(
						$("<span></span>").addClass("title_arrow")
							.append(
								$("<img />", { src : "image/ebook_listView_off.png" })
							)
					)
			)
			.append(
				$("<span></span>").addClass("title_line")
			)
			.append(
				$("<div></div>", { id : "js_book_title" }).addClass("book_number")
					.append(
						$("<div></div>").addClass("book_number_in")
							.append(
								$("<ul></ul>").addClass("list")
							)
							.append(
								$("<p></p>").addClass("no_data").text("목록이 없습니다.")
							)
					)
			).prependTo( this.$head );

		// 다중압축파일 메뉴
		var $cateLayer = titleCategory.find("#js_book_title")
		, $cateLayerList = $cateLayer.find(".list")
		, $cateLayerListLi = $cateLayerList.find("li")
		, $cateLayerNodata = $cateLayer.find(".no_data");

		// 다중압축 리스트 추가
		$cateLayerList.show();
		$cateLayerNodata.hide();

		// 제목레이어의 목록이 없을경우
		if( !$cateLayerListLi.length ){
			// 리스트 생성
			for( var i=0; i<value.contents_list.length; i++ ){
				$("<li />").append(
					$("<a />").attr({ href : "#", title : value.contents_list[i].title }).text( value.contents_list[i].title )
				).appendTo( $cateLayerList );

				// 마지막 리스트에 클래스 추가
				if( i == value.contents_list.length-1 ){
					$cateLayerList.find("li").eq(i).addClass("last-child");
				}
			}
		}

		// 폴더레이어
		var $titleMenu = this.$head.find(".title_menu")
		, $titleFolder = this.$head.find(".title_folder")
		, $titleList = $("<div></div>").addClass("title_list")
			.append( $titleMenu )
			.appendTo( this.$head );

		// 폴더별
		var $titleListValue = $titleFolder.find(".title a span")
		, $titleListLayer = $titleFolder.find(".book_number")
		, $titleLayerList = $titleListLayer.find(".list")
		, $titleLayerListLi = $titleLayerList.find("li")
		, $titleLayerNodata = $titleListLayer.find(".no_data")
		, $settingBtn = $(".btn_viewerSettings")
		, $settingLayer = $("#js_setting_wrap");

		// 폴더 타이틀 적용
		$titleListValue.text(value.title);
		// 폴더 리스트 추가
		if( value.folder_list.length > 1 ){
			$titleLayerList.show();
			$titleLayerNodata.hide();

			if( !$titleLayerListLi.length ){
				for( var i=0; i<value.folder_list.length; i++ ){
					$("<li />").append(
						$("<a />").attr({ href : "#", title : value.folder_list[i].title }).text( value.folder_list[i].title )
					).appendTo( $titleLayerList );

					if( i == value.folder_list.length-1 ){
						$titleLayerList.find("li").eq(i).addClass("last-child");
					}
				}
			}
		} else { // 폴더 리스트가 없을경우
			$titleLayerList.hide();
			$titleLayerNodata.show();
		}

		// 폴더리스트 레이어 닫기(초기)
		for( var j=0, max=$titleMenu.find(".book_number").length; j<max; j++ ){
			if( $titleMenu.find(".book_number").eq(j).css("display") != "none" ){
				$titleMenu.find(".book_number").eq(j).parent().find(".title a").trigger("click");
			}
		}

		// 설정 레이어 닫기(초기)
		if( $settingLayer.css("display") != "none" ){
			$settingBtn.trigger("click");
		}
	} else {
		// 타이틀 생성
		var $title = this.$head.find(".title")
		, $titleLayer = this.$head.find("#js_book_number")
		, $titleLayerList = $titleLayer.find(".list");

		// 초기화후 다중압축이 없을경우 해당 타이틀 삭제
		if( $(".title_category").length ){
			$(".title_category").remove();
			$titleLayerList.find("li").remove();

			$(".title_menu").removeClass("title_folder");
		}

		// 타이틀 레이어 활성화일경우(초기화)
		if( $title.hasClass("title_active") ){
			$title.removeClass("title_active");
			$title.find("img").remove();
			$title.find(".title_arrow").append(
				$("<img />").attr({ src : "image/ebook_listView_off.png" })
			)
		}

		// 타이틀명
		$title.parent().addClass("title_folder");
		$title.find("a span").text(value.title);
		// 레이어 숨김
		$titleLayer.hide();
		// 폴더가 1개 이상일경우
		if( value.folder_list.length > 1 ){
			$titleLayerList.show();
			// 빈값 레이어 내용 숨김
			$titleLayer.find(".no_data").hide();
			// 제목레이어의 목록이 없을경우
			if( !$titleLayerList.find("li").length ){
				for( var i=0; i<value.folder_list.length; i++ ){
					$("<li />").append(
						$("<a />").attr("href", "#").text( value.folder_list[i].title )
					).appendTo( $titleLayerList );

					// 마지막 리스트에 클래스 추가
					if( i == value.folder_list.length-1 ){
						$titleLayerList.find("li").eq(i).addClass("last-child");
					}
				}
			}
		} else { // 폴더가 없을경우
			$titleLayerList.hide();
			$titleLayer.find(".no_data").show();
		}
	}

	// 마우스포인트의 안내 메세지 레이어 생성(리셋을 위해 한번만 실행을 위해 조건문 추가)
	var $mouseLayerValue = $(".viewer_mouse_text");
	if( !$mouseLayerValue.length ){
		$("<div />").addClass("viewer_mouse_text").appendTo( this.$container );
	}

	// 이미지가 유형이 있고 이미지가 10개 이상일경우
	if( this.$imgForms && this.$length > 10  ){
		// 데이터 저장
		this.dataOverwrite({ imgForm : this.$imgForms });
		// 리스트 생성
		this.shapeAfterAction({ course : this.dataList.imgForm, data : this.dataList });
	} else { // 이미지 유형을 찾지못한경우
		// 이미지 유형 체크
		this.dataImgShape();
	}
}
// 이미지 태그 생성
Viewer.prototype.imgPreload = function(src){
	var image;

	if( src ){
		image = new window.Image();

		if( src ){
			image.src = src;
		}

		return image;
	}
}
// 이미지 유형 추출
Viewer.prototype.dataImgShape = function(op){
	var that = this
	, resetValue = ( op && op.value ) ? op.value : "initial"
	, resetImgForm = null
	, totalCount = 0
	, widthCount = 0
	, heightCount = 0;

	// 이미지형식(갸로형 또는 세로형) 체크를 위해 리스트 중간에 5장의 이미지 선별
	if( this.dataList.file_list.length < 5 ){
		for( var i=0; i<this.dataList.file_list.length; i++ ){
			// 전체 이미지 이미지 선택
			var preImage = this.imgPreload(this.dataList.file_list[i]);

			$(preImage).appendTo("body");

			// 이미지 로드
			preloadImg(preImage, this.dataList.file_list.length);
		}
	} else {
		for(var j=0; j<5; j++){
			// 전체 이미지에서 5장의 이미지 선택
			var preImage = this.imgPreload(this.dataList.file_list[Math.floor(this.dataList.file_list.length/5) + j]);

			$(preImage).appendTo("body");

			// 이미지 로드
			preloadImg(preImage, 5);
		}
	}

	// 이미지 로드
	function preloadImg(img, size){
		$(img).load(function(){
			var imgSizeLength = size;

			// 이미지 유형 체크값
			if( $(this).outerWidth() < $(this).outerHeight() ){
				heightCount++;
			} else {
				widthCount++;
			}

			// 총갯수 증가
			totalCount++;

			// 이미지 로드 마지막 체크
			if( totalCount === imgSizeLength ){
				// 유형 체크
				if( widthCount > heightCount ){
					resetImgForm = "horizontal"; // 가로형
				} else {
					resetImgForm = "vertical"; // 세로형
				}

				// 이미지 실제 사이즈
				that.$realImgWidth = $(this).outerWidth();
				that.$realImgHeight = $(this).outerHeight();

				// 데이터 저장(이미지형)
				that.dataOverwrite({ imgForm : resetImgForm }); // 이미지형 저장
				that.$imgForms = that.dataList.imgForm;
			}

			// 이미지 삭제(이미지형을 체크하기 위한 이미지이기 때문에 삭제)
			$(this).remove();

			// 리스트 생성
			if( resetImgForm ){
				that.shapeAfterAction({ course : resetImgForm, data : that.dataList, order : resetValue });
			}
		});
	}
}
// 리스트 생성
Viewer.prototype.shapeAfterAction = function(op){
	var that = this
	, $bookmark = this.$head.find(".btn_bookmark") // 북마크 버튼
	, $direction = this.$head.find(".btn_landscapeView") // 가로, 세로형 버튼
	, couseValue = null // 방향 설정
	, fileLength = null; // 파일리스트 체크

	// 리스트 생성 조건
	if( op.course === "horizontal" ){
		couseValue = "horizontal";

		if( this.optResult({ opt : "division" }) === 1 ){
			fileLength = this.dataList.file_list.length*2;
		} else {
			fileLength = this.dataList.file_list.length;
		}
	} else {
		couseValue = "vertical";

		if( this.optResult({ opt : "division" }) === 1 ){
			fileLength = this.dataList.file_list.length;
		} else {
			fileLength = this.dataList.file_list.length/2;
		}
	}

	// 리스트 생성
	for( var i=0; i<fileLength; i++ ){
		// 세로형
		if( couseValue === "vertical" ){
			// 한장보기
			if( this.optResult({ opt : "division" }) === 1 ){
				$("<div />").addClass("slide")
					.append(
						$("<span />").addClass("slide_view")
					).prependTo( this.$content.find(".content_wrap_in") );
			} else { // 두장보기
				currentList = $("<div />").addClass("slide").prependTo( this.$content.find(".content_wrap_in") );

				for( var j=0; j<this.optResult({ opt : "division" }); j++ ){
					$("<span />").addClass("slide_view").appendTo( currentList );
				}
			}
		} else { // 가로형
			// 한장보기
			if( this.optResult({ opt : "division" }) === 1 ){
				if( i%2 === 0 ){
					$("<div />").addClass("slide")
						.append(
							$("<span />").addClass(this.optResult({ opt : "course" }) === 1 ? "slide_view slide_even" : "slide_view slide_odd")
						).appendTo( this.$content.find(".content_wrap_in") );
				} else {
					$("<div />").addClass("slide")
						.append(
							$("<span />").addClass(this.optResult({ opt : "course" }) === 1 ? "slide_view slide_odd" : "slide_view slide_even")
						).appendTo( this.$content.find(".content_wrap_in") );
				}
			} else { // 두장보기
				currentList = $("<div />").addClass("slide slide_double").prependTo( this.$content.find(".content_wrap_in") );

				for( var k=0; k<this.optResult({ opt : "division" }); k++ ){
					if( k%2 === 0 ){
						$("<span />").addClass("slide_view slide_even").appendTo( currentList );
					} else {
						$("<span />").addClass("slide_view slide_odd").appendTo( currentList );
					}
				}
			}
		}
	}

	// 전체 리스트 생성
	this.$contentList = this.$content.find(".slide");

	// 이미지 로드
	if( this.optResult({ opt : "bookmark" }) > 0 ){
		// 데이터 오버라이딩
		this.dataOverwrite({ page_no : this.optResult({ opt : "bookmark" }) });

		// 이미지 로드
		this.createImgLoad({ data : this.dataList, order : "passNo" });
	} else {
		// 이미지 로드
		this.createImgLoad({ data : this.dataList, order : "initial" });
	}
}
// 이미지 생성
Viewer.prototype.createImgLoad = function(op){
	var that = this
	, bookmark = null
	, passNo = null
	, way = this.optResult({ opt : "course" })
	, division = this.optResult({ opt : "division" })
	, flag = false
	, allFlag = false
	, fileList = null
	, fileListActiveCount = null;

	// 북마크 및 현재 페이지번호 생성
	if( op.data.bookmark != "" ){
		if( division == 1 ){
			bookmark = this.optResult({ opt : "bookmark" });
			passNo = this.optResult({ opt : "bookmark" });
		} else {
			bookmark = Math.floor(this.optResult({ opt : "bookmark" })/2);
			passNo = Math.floor(this.optResult({ opt : "bookmark" })/2);
		}
	} else {
		bookmark = 0;
		passNo = 0;
	}

	// 이미지 형식에 따라 이미지 생성
	var createImgReturn = function(value){
		// 세로형
		if( op.data.imgForm === "vertical" ){
			// 한장보기
			if( division === 1 ){
				// 정방향
				if( way === 1 ){
					fileList = $(that.imgPreload(op.data.file_list[value])).addClass("img").appendTo( that.$contentList.eq(value).find("span") );
				} else { // 역방향
					if( value % 2 === 0 ){
						fileListActiveCount = op.data.file_list[value + 1];
					} else {
						fileListActiveCount = op.data.file_list[value - 1];
					}

					fileList = $(that.imgPreload(fileListActiveCount)).addClass("img").appendTo( that.$contentList.eq(value).find("span") );
				}
			} else { // 두장보기
				var count = (value * 2);

				for( var k=count; k<=count+1; k++){
					if( !that.$contentList.eq(value).find("span").eq(k%2).find("img").length ){
						if( way == 1 ){
							if( that.$contentList.eq(value).hasClass("slide_full_double") ){ // 전체화면
								fileList = $(that.imgPreload(op.data.file_list[k])).addClass("img").appendTo( that.$contentList.eq(value).find("span").eq(k%2) );
							} else { // 기본 화면
								fileList = $(that.imgPreload(op.data.file_list[k])).addClass("img").appendTo( that.$contentList.eq(value).addClass("slide_double").find("span").eq(k%2) );
							}
						} else {
							if( that.$contentList.eq(value).hasClass("slide_full_double") ){
								if( k % 2 != 0 ){
									fileList = $(that.imgPreload(op.data.file_list[k - 1])).addClass("img").appendTo( that.$contentList.eq(value).find("span").eq(k%2) );
								} else {
									fileList = $(that.imgPreload(op.data.file_list[k + 1])).addClass("img").appendTo( that.$contentList.eq(value).find("span").eq(k%2) );
								}
							} else {
								if( k % 2 != 0 ){
									fileList = $(that.imgPreload(op.data.file_list[k - 1])).addClass("img").appendTo( that.$contentList.eq(value).addClass("slide_double").find("span").eq(k%2) );
								} else {
									fileList = $(that.imgPreload(op.data.file_list[k + 1])).addClass("img").appendTo( that.$contentList.eq(value).addClass("slide_double").find("span").eq(k%2) );
								}
							}
						}
					}
				}
			}
		} else { // 가로형
			// 한장보기
			if( division === 1 ){
				fileList = $(that.imgPreload(op.data.file_list[Math.floor(value/2)])).addClass("img").appendTo( that.$contentList.eq(value).find("span") );
			} else { // 두장보기
				if( that.$contentList.eq(value).find("span img").length ){
					that.$contentList.eq(value).find("span img").remove();
				}

				fileList = $(that.imgPreload(op.data.file_list[value])).addClass("img").appendTo( that.$contentList.eq(value).find("span") );
			}
		}

		// 이미지 로드
		fileList.load(function(v, i){
			if( !flag && typeof op.order !== "number" ){
				var timers = setInterval(function(){
					if( !that.$imgHeight ){
						that.optResult({ opt : "size", size : that.$contentList.eq(passNo).find("span img") });
					} else {
						// 타이머 정지
						clearInterval(timers);

						// 추출된 이미지 사이즈 초기값으로 저장
						that.$initImgWidth = that.$imgWidth;
						that.$initImgHeight = that.$imgHeight;

						// 로딩실행
						that.loadingBar({ active : "hide" });

						// 상단 메뉴 이벤트
						that.menuCreateEvent();

						// 책갈피
						that.bookmark({ node : that.$head.find(".btn_bookmark") });

						// 가로 및 세로뷰
						that.wayView({ node : that.$head.find(".btn_landscapeView") });

						// 자동넘김 설정
						that.autoPassPage();

						// 페이지 넘김 순서
						that.pageWayView();

						// 페이지 1~2장보기
						that.divisionView();

						// 배경색 설정
						that.backColor();
					}
				}, 50)

				flag = true;
			}
		})
	}

	// 초기 실행
	if( op.order == "initial" ){
		for( var i=bookmark-1; i<=bookmark+1; i++){
			if( i >= 0 ){
				createImgReturn(i);
			}
		}
	} else if( op.order == "passNo" ) { // 북마크로 인해 처음이 아닌경우
		for( var j=passNo-1; j<=passNo+1; j++){
			if( !that.$contentList.eq(( op.data.page_way == 1 ) ? j : (op.data.file_list.length-1)-j).find("img").length ){
				if( j >= 0 && j < that.$contentList.length ){
					createImgReturn(j);
				}
			}
		}
	} else { // 하나씩 생성될경우
		if( typeof op.order != "string" ){
			createImgReturn(op.order);
		}
	}
}
// 메뉴 이벤트 생성
Viewer.prototype.menuCreateEvent = function(){
	var that = this
	, $titleMenu = this.$head.find(".title a") // 타이틀
	, $titleCategory = this.$head.find(".title_category .title a") // 타이틀
	, $titleFolder = this.$head.find(".title_folder .title a") // 타이틀
	, $titleLayer = this.$head.find(".book_number") // 타이틀 레이어
	, $titleLayerLink = $titleLayer.find("a") // 타이틀 레이어 링크
	, $titleContentLink = this.$head.find("#js_book_title a") // 컨텐츠 레이어 링크
	, $titleFolderLink = this.$head.find("#js_book_number a") // 폴더 레이어 링크
	, $btnContentMenu = this.$container.find("#js_all_button") // 전체영역 클릭
	, $btnFullMenu = this.$head.find(".btn_full") // full 버튼
	, $btnMarkMenu = this.$head.find(".btn_bookmark") // 북마크 버튼
	, $btnDirectMenu = this.$head.find(".btn_landscapeView") // 가로 및 세로 버튼
	, $btnSetupMenu = this.$head.find(".btn_viewerSettings") // 뷰어설정 버튼
	, $setupLayer = this.$head.find(".setting_wrap") // 뷰어 설정 레이어
	, $checkAutoStart = $setupLayer.find(".js_auto_input .input-radio") // 자동넘김 설정(input)
	, $checkPageOrder = $setupLayer.find(".js_order_input .input-radio") // 페이지 넘김 순서(input)
	, $checkViewCount = $setupLayer.find(".js_view_input .input-radio") // 페이지 이미지 노출 갯수(input)
	, $btnBackColor = $setupLayer.find(".js_bgcolor_selc a") // 배경색 설정 버튼
	, $btnPrev = this.$menu.find(".btn_previous") // 이전회 버튼
	, $btnNext = this.$menu.find(".btn_nextTime") // 다음회 버튼
	, $inputRange = this.$menu.find(".input-range") // 페이지 inut
	//, $inputParent = this.$menu.find(".ui-slider-bg") // 페이지 활성화
	//, $inputIcon = this.$menu.find(".ui-slider-handle") // 페이지 아이콘
	, $stateLayer = $(".viewer_mouse_text") // 마우스 포인트 레이어(이전, 메뉴, 다음)
	, menuActive = true // 상하단 컨트롤러 활성화 여부
	, inputFocus = null
	, slider = null
	, inputValue = null;

	// 상단메뉴 마우스오버
	this.$head.parent().bind("mouseenter", function(){
		// 마우스 포인터 레이어 숨김
		$stateLayer.hide();
	});
	// 하단메뉴 마우스오버
	this.$menu.bind("mouseenter", function(){
		// 마우스 포인터 레이어 숨김
		$stateLayer.hide();
	});

	// 전체영역 클릭
	$btnContentMenu.unbind().bind("click", function(e){
		var posX = e.pageX; // 마우스 X 좌표

		if( posX < Math.floor( $(window).width()/3 ) ){ // 좌측영역
			// 정방향 또는 역방향 버튼 위치 변경
			if( that.optResult({ opt : "course" }) === 1 ){
				// 진행 모션
				that.progressMotion({ course : "prev" });
			} else {
				// 진행 모션
				that.progressMotion({ course : "next" });
			}

			if( menuActive ){
				if( $titleMenu.parent().hasClass("title_active") || $btnSetupMenu.hasClass("btn_viewerSettings_active") ){
					// 기능 레이어 숨김
					that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });
				}

				// 기능컨트럴 레이어 활성화
				that.controllToggle(false);

				menuActive = false;
			}
		} else if( posX >= Math.floor( $(window).width()/3 ) && posX < Math.floor( $(window).width()/3 )*2 ) { // 중앙영역
			if( menuActive ){
				// 기능컨트럴 레이어 활성화
				that.controllToggle(false);

				// 기능 레이어 숨김
				that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });

				menuActive = false;
			} else {
				// 기능컨트럴 레이어 활성화
				that.controllToggle(true);

				menuActive = true;
			}
		} else { // 우측영역
			// 정방향 또는 역방향 버튼 위치 변경
			if( that.optResult({ opt : "course" }) === 1 ){
				// 진행 모션
				that.progressMotion({ course : "next" });
			} else {
				// 진행 모션
				that.progressMotion({ course : "prev" });
			}

			if( menuActive ){
				if( $titleMenu.parent().hasClass("title_active") || $btnSetupMenu.hasClass("btn_viewerSettings_active") ){
					// 기능 레이어 숨김
					that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });
				}

				// 기능컨트럴 레이어 활성화
				that.controllToggle(false);

				menuActive = false;
			}
		}
	});
	// 전체영역 마우스무브
	$btnContentMenu.bind("mousemove", function(e){
		var posX = e.pageX
		, posY = e.pageY;

		// 마우스포인트 레이어 위치
		mousePos({ psX : posX, psY : posY });
	});

	// 전체영역 클릭
	this.$content.unbind().bind("click", function(e){
		var posX = e.pageX;

		if( menuActive ){
			// 기능컨트럴 레이어 활성화
			that.controllToggle(false);

			// 기능 레이어 숨김
			that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });

			menuActive = false;
		} else {
			// 기능컨트럴 레이어 활성화
			that.controllToggle(true);

			menuActive = true;
		}
	});
	// 전체영역 마우스무브
	this.$content.bind("mousemove", function(e){
		var posX = e.pageX
		, posY = e.pageY;

		// 마우스포인트 레이어 위치
		mousePos({ psX : posX, psY : posY });
	});

	// 키보드 클릭
	$(document).unbind().bind("keydown", function(e){
		// Ctrl + N 눌렀을경우
		if( e.ctrlKey && e.keyCode == 78 ){
			if( confirm("Ctrl+N 으로 보실경우 서비스에 불편함을 느낄수 있습니다. 그래도 보시겠습니까?") ){
				window.open(location.href);
			}
		}

		if( !inputFocus ){
			// 기능 레이어 숨김
			that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });

			// 가로뷰 좌우, home, end키 동작
			if( that.optResult({ opt : "adjust" }) ){
				if( e.which === 37 ){ // 좌측키
					if( that.optResult({ opt : "course" }) === 1 ){
						// 진행 모션
						that.progressMotion({ course : "prev" });
					} else {
						// 진행 모션
						that.progressMotion({ course : "next" });
					}
				} else if( e.which === 39 ){ // 우측키
					if( that.optResult({ opt : "course" }) === 1 ){
						// 진행 모션
						that.progressMotion({ course : "next" });
					} else {
						// 진행 모션
						that.progressMotion({ course : "prev" });
					}
				} else if( e.which === 36 ){ // Home키
					// 진행 모션
					that.progressMotion({ course : "first" });
				} else if( e.which === 35 ) { // End키
					// 진행 모션
					that.progressMotion({ course : "last" });
				}
			} else { // 세로뷰 상하, home, end키 동작
				if( e.which === 38 ){ // 상단키
					// 진행 모션
					that.progressMotion({ course : "up" });
				} else if( e.which === 40 ){ // 하단키
					// 진행 모션
					that.progressMotion({ course : "down" });
				} else if( e.which === 36 ){ // Home키
					// 진행 모션
					that.progressMotion({ course : "first" });
				} else if( e.which === 35 ){ // End키
					// 진행 모션
					that.progressMotion({ course : "last" });
				}
			}

			// 스페이스바 누를경우 전체 페이지로 전환
			if( e.which === 32 ){
				$btnFullMenu.trigger("click");
			}
		}
	});

	// 압축폴더 클릭
	$titleCategory.unbind().bind("click", function(){
		if( !$(this).parent().hasClass("title_active") ){
			// 버튼 클래스 추가
			$(this).parent().addClass("title_active");
			// 레이어 노출
			$(this.hash).stop().fadeIn();

			// 기능 레이어 숨김
			that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu, active : $titleCategory });
		} else {
			// 버튼 클래스 삭제
			$(this).parent().removeClass("title_active");
			// 레이어 숨김
			$(this.hash).stop().fadeOut();
		}
	});

	// 타이틀 클릭
	$titleFolder.unbind().bind("click", function(){
		if( !$(this).parent().hasClass("title_active") ){
			// 버튼 클래스 추가
			$(this).parent().addClass("title_active");
			// 레이어 노출
			$(this.hash).stop().fadeIn();

			// 기능 레이어 숨김
			that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu, active : $titleFolder });
		} else {
			// 버튼 클래스 삭제
			$(this).parent().removeClass("title_active");
			// 레이어 숨김
			$(this.hash).stop().fadeOut();
		}
	});
	// 제목 레이어 오버
	$titleLayerLink.unbind("mouseenter", "mouseleave");
	$titleLayerLink.bind("mouseenter", function(){
		$(this).parent().addClass("active");
	});
	// 제목 레이어 아웃
	$titleLayerLink.bind("mouseleave", function(){
		$(this).parent().removeClass("active");
	});

	// 다중압축 링크 클릭
	$titleContentLink.bind("click", function(){
		// Index 추출
		var index = $titleContentLink.index(this);

		// 타이머 취소
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		// 리셋(데이터 재로드)
		that.initReset({ url : that.dataList.contents_list[index].link });
	});
	// 폴더 리스트 링크 클릭
	$titleFolderLink.bind("click", function(){
		// Index 추출
		var index = $titleFolderLink.index(this);

		// 타이머 취소
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		// 리셋(데이터 재로드)
		that.initReset({ url : that.dataList.folder_list[index].link });
	});

	// 전체보기 클릭
	$btnFullMenu.unbind().bind("click", function(e){
		var states;

		// 이미지 사이즈 초기화
		that.$imgWidth = null;
		that.$imgHeight = null;

		// 전체보기
		if( !$(this).hasClass("js_fullSize") ){
			// 버튼 클래스 추가
			$(this).addClass("js_fullSize");
			// 버튼 이미지 변경
			$(this).find("img")[0].src = $(this).find("img")[0].src.replace("_off.", "_on.");

			// 전체화면 변수
			that.$popupSize = true;

			states = "false";

			// 이미지 가로 및 세로값 추출
			var divisionTimer = setInterval(function(){
				if( !that.$imgHeight ){
					that.optResult({ opt : "size", size : that.$contentList.find(".slide_view").eq(that.optResult({ opt : "passNo" })).find("img") });
				} else {
					clearInterval(divisionTimer);

					// 전체보기
					that.fullSize({ state : states });
					// 전체 이미지 리사이즈
					that.imgAllResize();
				}
			}, 100);
		} else { // 기본크기
			// 버튼 클래스 삭제
			$(this).removeClass("js_fullSize");
			// 버튼 이미지 변경
			$(this).find("img")[0].src = $(this).find("img")[0].src.replace("_on.", "_off.");

			// 초기 이미지사이즈 저장
			that.$imgWidth = that.$initImgWidth;
			that.$imgHeight = that.$initImgHeight;

			// 기본화면 변수
			that.$popupSize = false;

			states = "true";

			// 전체보기
			that.fullSize({ state : states });
			// 전체 이미지 리사이즈
			that.imgAllResize();
		}
	});

	// 전체보기 ESC키 이벤트
	document.addEventListener("fullscreenchange", evtFullEsc);
	document.addEventListener("webkitfullscreenchange", evtFullEsc);
	document.addEventListener("mozfullscreenchange", evtFullEsc);
	document.addEventListener("MSFullscreenChange", evtFullEsc);

	// 책갈피 클릭
	$btnMarkMenu.unbind().bind("click", function(){
		// 책갈피
		that.bookmark({ node : $(this), active : that.optResult({ opt : "pageNo" }) });

		// ----------------- 데이터 서버 요청(북마크) ----------------- //
		/*
		that.dataPost({
			type : "bookmark",
			idx : "<?php echo $_REQUEST["idx"];?>",
			folder_name : that.dataList.folder_name,
			bookmark : that.dataList.bookmark
		});
		*/
		// ----------------- 데이터 서버 요청(북마크) ----------------- //
	});

	// 가로, 세로뷰 클릭
	$btnDirectMenu.unbind().bind("click", function(){
		// 타이머 취소
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		// 가로 및 세로뷰 데이터 저장
		if( that.optResult({ opt : "adjust" }) ){
			that.dataOverwrite({ adjust : "H" });
		} else {
			that.dataOverwrite({ adjust : "W" });
		}

		// 가로, 세로뷰 기능
		that.wayView({ node : $(this), active : that.optResult({ opt : "pageNo" }) });
		// 기능 레이어 숨김
		that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });

		// 시간설정
		if( that.optResult({ opt : "auto" }) ){
			that.autoPageTimer({ time : that.optResult({ opt : "auto" }) });
		}

		// ----------------- 데이터 서버 요청(가로 및 세로뷰) ----------------- //
		//that.dataPost({ type : "adjust", val : that.dataList.adjust });
		// ----------------- 데이터 서버 요청(가로 및 세로뷰) ----------------- //
	});

	// 설정 클릭
	$btnSetupMenu.unbind().bind("click", function(){
		if( $(this).hasClass("btn_viewerSettings_active") ){
			// 설정 아이콘 비활성화
			$(this).removeClass("btn_viewerSettings_active");
			$(".setting_wrap").stop().fadeOut();
		} else {
			// 설정 아이콘 활성화
			$(this).addClass("btn_viewerSettings_active");
			$(".setting_wrap").stop().fadeIn();

			// 기능 레이어 숨김
			that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu, active : $btnSetupMenu });
		}
	});

	// 자동넘김 설정
	$checkAutoStart.unbind().bind("click", function(){
		// 선택한 value값 저장
		var index = parseFloat($(this).val());

		// 타이머 취소
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		if( that.optResult({ opt : "course" }) !== index ){
			// 자동넘김 실행
			that.autoPassPage({ active : index });
			// 데이터 저장(자동넘김)
			that.dataOverwrite({ auto_pass : index });

			// ----------------- 데이터 서버 요청(자동넘김) ----------------- //
			//that.dataPost({ type : "auto_pass", val : that.dataList.auto_pass });
			// ----------------- 데이터 서버 요청(자동넘김) ----------------- //
		}
	});

	// 페이지 넘김 순서
	$checkPageOrder.unbind().bind("click", function(){
		// Index 추출
		var index = $checkPageOrder.index(this);

		if( that.optResult({ opt : "course" }) !== index+1 ){
			// 타이머 취소
			if( that.$timer ){
				clearInterval(that.$timer);
			}

			// 데이터 저장(페이지 넘김순서)
			that.dataOverwrite({ pass_way : index+1 });
			// 페이지 넘김순서
			that.pageWayView({ active : index+1 });

			// 슬라이드 페이징
			sliderForm(that.optResult({ opt : "length" }));

			// 페이징
			that.pageCountArea({ active : ( that.optResult({ opt : "division" }) == 1 ) ? that.optResult({ opt : "pageNo" }) : that.optResult({ opt : "pageNo" })/2 });

			// 시간설정
			if( that.optResult({ opt : "auto" }) ){
				that.autoPageTimer({ time : that.optResult({ opt : "auto" }) });
			}

			// ----------------- 데이터 서버 요청(넘김순서) ----------------- //
			//that.dataPost({ type : "pass_way", val : that.dataList.pass_way });
			// ----------------- 데이터 서버 요청(넘김순서) ----------------- //
		}

		//$btnSetupMenu.trigger("click");
	});

	// 페이지 이미지 노출 갯수
	$checkViewCount.unbind().bind("click", function(){
		// Index 추출
		var index = $checkViewCount.index(this);

		if( that.optResult({ opt : "division" }) !== index+1 ){
			// 자동넘김 초기화
			if( that.$timer ){
				clearInterval(that.$timer);
			}

			// 데이터 저장(1,2장보기)
			that.dataOverwrite({ pass_division : index+1 });

			// 1, 2장보기
			that.divisionView({ active : index+1 });

			// 슬라이드 페이징
			sliderForm( that.optResult({ opt : "length" }) );

			// 페이징
			that.pageCountArea({ active : ( that.optResult({ opt : "division" }) === 1 ) ? that.optResult({ opt : "pageNo" }) : that.optResult({ opt : "pageNo" })/2 });

			// 시간설정
			if( that.optResult({ opt : "auto" }) ){
				that.autoPageTimer({ time : that.optResult({ opt : "auto" }) });
			}

			// ----------------- 데이터 서버 요청(1 또는 2장 보기) ----------------- //
			//that.dataPost({ type : "pass_division", val : that.dataList.pass_division });
			// ----------------- 데이터 서버 요청(1 또는 2장 보기) ----------------- //
		}
	});

	// 배경색 설정
	$btnBackColor.unbind().bind("click", function(){
		// Index 추출
		var index = $btnBackColor.index(this)
		, colorInit = $(this).parent().attr("class").slice(4, 5).toUpperCase();

		if( that.dataList.background !== colorInit ){
			// 자동넘김 초기화
			if( that.$timer ){
				clearInterval(that.$timer);
			}

			// 배경색 설정
			that.backColor({ indexs : index, active : colorInit });
			// 데이터 저장(배경색)
			that.dataOverwrite({ background : colorInit });

			// 시간설정
			if( that.optResult({ opt : "auto" }) ){
				that.autoPageTimer({ time : that.optResult({ opt : "auto" }) }); // 시간설정
			}

			// ----------------- 데이터 서버 요청(1 또는 2장 보기) ----------------- //
			//that.dataPost({ type : "background", val : that.dataList.background });
			// ----------------- 데이터 서버 요청(1 또는 2장 보기) ----------------- //
		}
	});

	// 이전화
	$btnPrev.unbind().bind("click", function(){
		// 자동넘김 초기화
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		// 이전, 다음 메세지 출력
		that.layerAlertMsg({ result : "prev" });

		// 기능 레이어 숨김
		that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });
	});
	// 다음화
	$btnNext.unbind().bind("click", function(){
		// 자동넘김 초기화
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		// 이전, 다음 메세지 출력
		that.layerAlertMsg({ result : "next" });

		// 기능 레이어 숨김
		that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });
	});

	// 입력 input focusin
	$inputRange.unbind().bind("focusin", function(e){
		// Input Value
		inputValue = $(this).val();

		// Input Value 리셋
		$(this).val(" ");

		// Input Focus
		inputFocus = true;
	});
	// 입력 input focusout
	$inputRange.bind("focusout", function(){
		if( $(this).val() == " " ){
			$(this).val(inputValue);
		}

		inputFocus = false;
	});
	// 입력 input change
	$inputRange.bind("change", function(e){
		// 자동넘김 설정 초기화
		if( that.$timer ){
			clearInterval(that.$timer);
		}

		// 입력값 체크
		if( $(this).val() > 0 && $(this).val() < (( that.optResult({ opt : "division" }) === 1 ) ? that.optResult({ opt : "length" }) : that.optResult({ opt : "length" })*2) ){
			slider.slider( "value", $(this).val() );

			optLength = that.optResult({ opt : "length" });

			if( that.optResult({ opt : "adjust" }) ){
				that.progressMotion({ course : ( that.optResult({ opt : "division" }) === 1 ) ? $(this).val()-1 : Math.floor(($(this).val()-1)/2) });
			} else {
				that.funcVerticalAction({ node : that.$content.find(".content_wrap_in"), opt : ( that.optResult({ opt : "division" }) === 1 ) ? $(this).val()-1 : Math.floor(($(this).val()-1)/2) });
			}
		} else {
			alert("잘못된 값입니다. 1~" + that.optResult({ opt : "length" }) + "의 값을 입력해주세요.");

			$inputRange.val(that.optResult({ opt : "pageNo" })+1);
		}

		// 기능 레이어 숨김
		that.layerToggle({ tMenu : $titleCategory, fMenu : $titleFolder, sMenu : $btnSetupMenu });

		// 시간설정
		if( that.optResult({ opt : "auto" }) ){
			that.autoPageTimer({ time : that.optResult({ opt : "auto" }) });
		}

		// 아이콘 포커스아웃
		$(this).blur();
	});

	// 슬라이드 페이징
	sliderForm();

	// full 스크린
	$(window).unbind().resize(function(){
		that.$imgWidth = null;
		that.$imgHeight = null;

		// 이미지 사이즈 추출
		var divisionTimer = setInterval(function(){
			if( !that.$imgHeight ){
				that.optResult({ opt : "size", size : that.$contentList.eq(( that.optResult({ opt : "division" }) === 1 ) ? that.optResult({ opt : "pageNo" }) : Math.floor(that.optResult({ opt : "pageNo" })/2)).find(".slide_view img") });
			} else {
				clearInterval(divisionTimer);

				// 전체 이미지 리사이즈
				that.imgAllResize();
			}
		}, 50);
	});

	// 슬라이드 페이징 함수
	function sliderForm(){
		// Jquery UI 슬라이더
		slider = $("#slider-range-min").slider({
			range : ( that.optResult({ opt : "course" }) === 1 ) ? "min" : "max",
			value : 1,
			min : 1,
			max : that.optResult({ opt : "length" }),
			value : $inputRange.attr("data-value"),
			slide : function( event, ui ) {
				// 정방향과 역방향 현재값 추출
				var uiValue = ( that.optResult({ opt : "course" }) === 1 ) ? ui.value : that.optResult({ opt : "length" }) - (ui.value-1);

				// Input에 들어갈 Value 값
				$inputRange.val( uiValue );

				// 가로뷰
				if( that.optResult({ opt : "adjust" }) ){
					that.progressMotion({ course : uiValue-1 });
				} else { // 세로뷰
					that.progressMotion({ node : that.$content.find(".content_wrap_in"), course : uiValue-1 });
				}

				// 슬라이더 아이콘 포커스 아웃
				$(".ui-slider-handle").blur();
			}
		});
	}

	// 컨텐츠 마우스 좌표 위치
	function mousePos(op){
		var posX = op.psX
		, posY = op.psY;

		// 레이어 활성화
		$stateLayer.css({ left : posX - 20, top : posY + 30 }).show();

		// 가로뷰
		if( that.optResult({ opt : "adjust" }) ){
			if( posX < Math.floor( $(window).width()/3 ) ){ // 좌측영역
				// 정방향 또는 역방향 버튼 위치 변경
				if( that.optResult({ opt : "course" }) === 1 ){
					$stateLayer.text("이전").show();
				} else {
					$stateLayer.text("다음").show();
				}
			} else if( posX >= Math.floor( $(window).width()/3 ) && posX < Math.floor( $(window).width()/3 )*2 ) { // 중앙
				$stateLayer.text("메뉴");
			} else { // 우측영역
				// 정방향 또는 역방향 버튼 위치 변경
				if( that.optResult({ opt : "course" }) === 1 ){
					$stateLayer.text("다음").show();
				} else {
					$stateLayer.text("이전").show();
				}
			}
		} else { // 세로뷰
			$stateLayer.text("메뉴");
		}
	}

	// 전체보기 ESC키 인식 이벤트
	function evtFullEsc(){
		// 엣지 및 크롬
		if( document.webkitIsFullScreen == false ){
			if( $btnFullMenu.hasClass("js_fullSize") ){
				$btnFullMenu.trigger("click");
			}
		}
		// 파이어폭스
		if( document.mozFullScreen == false ){
			if( $btnFullMenu.hasClass("js_fullSize") ){
				$btnFullMenu.trigger("click");
			}
		}
		// 익스 하위버전
		if( document.msFullscreenEnabled == true ){
			if( document.msFullscreenElement == null ){
				if( $btnFullMenu.hasClass("js_fullSize") ){
					$btnFullMenu.trigger("click");
				}
			}
		}
	}
}
// 전체 및 현재사이즈
Viewer.prototype.fullSize = function(op){
	var that = this
	, $btnFullMenu = this.$head.find(".btn_full") // full 버튼
	, agent = navigator.userAgent.toLowerCase()
	, fullResize = null;

	// 전체화면
	if( op.state == "false" ){
		// Supports most browsers and their versions.
		var requestMethod = document.documentElement.requestFullscreen || document.documentElement.webkitRequestFullscreen || document.documentElement.mozRequestFullscreen || document.documentElement.msRequestFullscreen;
		// Native full screen.
		if (requestMethod) {
			requestMethod.call(document.documentElement);
		}

		// 익스
		if( agent.indexOf("msie") != -1 ){
			var addWidth = screen.availWidth - $("body").width()
			, addHeight = screen.availHeight - $("body").height();

			// 익스에서 팝업의 위치가 움직이는 에러 수정
			window.moveTo(0, 0);
			window.resizeBy(addWidth, addHeight);

			// 세로뷰 이미지 위치
			if( ($(window).width()+16) == screen.width && this.optResult({ opt : "adjust" }) == "H" ){
				that.$content.find(".content_wrap_in").scrollTop($(window).height() * (( this.optResult({ opt : "division" }) == 1 ) ? this.optResult({ opt : "pageNo" }) : Math.floor(this.optResult({ opt : "pageNo" })/2)));
			}
		} else { // 그외
			// 세로뷰 이미지 위치
			if( $(window).width() == screen.width && this.optResult({ opt : "adjust" }) == "H" ){
				that.$content.find(".content_wrap_in").scrollTop($(window).height() * (( this.optResult({ opt : "division" }) == 1 ) ? this.optResult({ opt : "pageNo" }) : Math.floor(this.optResult({ opt : "pageNo" })/2)));
			}
		}
	} else { // 기본
		if( agent.indexOf("msie") != -1 ){
			window.moveTo(0, 0);
			window.resizeTo(that.$screenWidth+17, that.$screenHeight+70);
		}

		// 원복
		if (document.cancelFullScreen) {
			document.cancelFullScreen();
		} else if (document.mozCancelFullScreen) {
			document.mozCancelFullScreen();
		} else if (document.webkitCancelFullScreen) {
			document.webkitCancelFullScreen();
		} else {
			document.msExitFullscreen();
		}
	}
}
// 북마크( node, data )
Viewer.prototype.bookmark = function(op){
	var active = ( op && op.active >= 0 ) ? op.active : null
	, listCount = this.optResult({ opt : "total" });

	// 초기 실행
	if( !active ){
		if( this.optResult({ opt : "bookmark" }) > 0 ){
			var currentPageNum = this.optResult({ opt : "bookmark" });

			// 북마크아이콘 이미지 활성화
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_off", "_on");
			// 북마크아이콘 위치값으로 이동
			listCount.eq(currentPageNum).append( this.$bookmark );
			// 북마크아이콘 활성화
			this.$bookmark.show();

			// 가로 및 세로형
			if( this.optResult({ opt : "adjust" }) ){
				this.progressMotion({ course : currentPageNum });
			} else {
				this.progressMotion({ node : this.$content.find(".content_wrap_in"), course : currentPageNum });
			}

			// 페이징
			this.pageCountArea({ active : currentPageNum });
		} else {
			// 가로 및 세로형
			if( this.optResult({ opt : "adjust" }) ){
				this.progressMotion({ course : this.optResult({ opt : "pageNo" }) });
			} else {
				this.progressMotion({ node : this.$content.find(".content_wrap_in"), course : currentPageNum });
			}

			// 페이징
			this.pageCountArea({ active : this.optResult({ opt : "pageNo" }) });
		}
	} else { // 메뉴 클릭 실행
		// 북마크값과 현재 선택한값이 다를경우
		if( this.optResult({ opt : "bookmark" }) != active ){
			// 북마크아이콘 이미지 활성화
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_off", "_on");

			// 북마크아이콘 위치값으로 이동
			if( this.optResult({ opt : "division" }) == 1 ){ // 한장보기
				listCount.eq(active).append( this.$bookmark );
			} else { // 2장보기
				listCount.eq(Math.floor(active/2)).append( this.$bookmark );
			}

			// 북마크아이콘 활성화
			this.$bookmark.show();

			// 데이터 병합
			this.dataOverwrite({ bookmark : active });
		} else { // 북마크값과 현재 선택한값이 같을경우
			// 북마크아이콘 비활성화
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_on", "_off");
			// 북마크아이콘 위치값으로 이동
			this.$container.append( this.$bookmark );

			// 북마크아이콘 숨김
			this.$bookmark.hide();

			// 데이터 병합
			this.dataOverwrite({ bookmark : "" });
		}
	}
}
// 가로 및 세로뷰
Viewer.prototype.wayView = function(op){
	var $contentWrap = this.$content.find(".content_wrap_in")
	, active = ( op && op.active >= 0 ) ? op.active : null
	, listCount = this.optResult({ opt : "total" })
	, imgHeight = null;

	// 초기 실행
	if( active == null ){
		// 가로뷰
		if( this.optResult({ opt : "adjust" }) ){
			// 버튼 이미지 변경
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_off", "_on");

			// 가로뷰의 선택영역 노출
			$("#js_all_button").show();
		} else { // 세로뷰
			// 버튼 이미지 변경
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_on", "_off");

			// 가로뷰의 선택영역 숨김
			$("#js_all_button").hide();
		}
	} else { // 메뉴 클릭
		// 가로뷰
		if( this.optResult({ opt : "adjust" }) ){
			// 세로뷰 스크롤 이벤트 삭제
			$contentWrap.unbind("scroll");

			// 버튼 이미지 변경
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_off", "_on");

			// 가로뷰의 선택영역 노출
			$("#js_all_button").show();

			// 진행 모션
			this.progressMotion();
		} else { // 세로뷰
			// 버튼 이미지 변경
			op.node.find("img")[0].src = op.node.find("img")[0].src.replace("_on", "_off");

			// 가로뷰의 선택영역 숨김
			$("#js_all_button").hide();

			if( this.optResult({ opt : "division" }) === 1 ){
				// 진행 모션
				this.progressMotion({ node : $contentWrap, course : this.optResult({ opt : "pageNo" }) });
			} else {
				// 진행 모션
				this.progressMotion({ node : $contentWrap, course : this.optResult({ opt : "pageNo" })/2 });
			}
		}

		// 전체 이미지 리사이즈
		this.imgAllResize();
	}
}
// 진행 모션 이벤트
Viewer.prototype.progressMotion = function(op){
	var that = this
	, course = ( op && op.course || op && op.course >= 0 ) ? op.course : null // 현재 상태
	, $node = ( op && op.node ) ? op.node : null // 스크롤 이벤트 대상
	, optEvt = ( op && op.evt ) ? op.evt : null // 스크롤 이벤트 사용여부
	, listCount = this.optResult({ opt : "total"}) // 전체 리스트
	, pageNum = this.optResult({ opt : "pageNo"}) // 이미지 카운팅
	, activePage = null // 페이지 카운팅
	, lengths = null // 현재 이동할 최종카운팅
	, currentNum = null;

	// 타이머가 실행중일때 삭제
	if( this.$timer ){
		clearInterval(this.$timer);
	}

	// 페이지 1, 2장보기에 따라 현재 페이지번호와 전체 번호
	if( this.optResult({ opt : "division" }) === 1 ){
		activePage = pageNum;
		lengths = ( this.dataList.imgForm == "vertical" ) ? this.$length-1 : (this.$length*2)-1;
	} else {
		activePage = Math.floor(pageNum/2);
		lengths = ( this.dataList.imgForm == "vertical" ) ? ( this.$length%2 == 0 ) ? Math.floor(this.$length/2)-1 : Math.floor(this.$length/2) : this.$length-1;
	}

	// 키 방향
	if( course === "next" || course === "down" ){ // 다음
		if( activePage < lengths ){
			pageNum = ( this.optResult({ opt : "division" }) == 1 ) ? pageNum+1 : pageNum+2;
			activePage = activePage+1;

			// 이미지 생성
			if( !listCount.eq(activePage+1).find(".slide_view img").length ){
				this.createImgLoad({ data : this.dataList, order : activePage+1 });
			}

			// 방향설정
			that.$course = "next";
		} else {
			// 마지막일경우(다음화 연결할) 레이어 활성화
			this.layerAlertMsg({ result : "last" });
		}
	} else if( course === "prev" || course === "up" ){ // 이전
		if( activePage > 0 ){
			if( this.optResult({ opt : "division" }) === 1 ){
				if( pageNum-1 < 0 ){
					pageNum = 0;
				} else {
					pageNum = pageNum-1;
				}
			} else {
				if( pageNum-1 < 0 ){
					pageNum = 0;
				} else {
					pageNum = pageNum-2;
				}
			}
			activePage = activePage-1;

			// 이미지 생성
			if( !listCount.eq(activePage-1).find(".slide_view img").length ){
				this.createImgLoad({ data : this.dataList, order : activePage-1 });
			}

			// 방향설정
			that.$course = "prev";
		}
	} else if( course == "first" ){ // 처음으로
		pageNum = 0;
		activePage = 0;

		// 이미지 생성
		if( !listCount.eq(activePage).find(".slide_view img").length ){
			this.createImgLoad({ data : this.dataList, order : activePage });
		}
	} else if( course == "last" ) { // 마지막으로
		pageNum = this.$length-1;
		activePage = lengths;

		// 이미지 생성
		for( var i=activePage-1; i<=activePage; i++ ){
			if( !listCount.eq(i).find(".slide_view img").length ){
				this.createImgLoad({ data : this.dataList, order : i });
			}
		}
	} else if( typeof course == "number" ) { // 현재 숫자로
		if( this.optResult({ opt : "division" }) === 1 ){
			pageNum = course;
		} else {
			pageNum = ( course <= 0 ) ? course : course*2;
		}
		activePage = course;

		// 이미지 생성
		for( var j=activePage-1; j<=activePage+1; j++ ){
			if( j >= 0 && !listCount.eq(j).find(".slide_view img").length ||
				j <= activePage && !listCount.eq(j).find(".slide_view img").length
			){
				this.createImgLoad({ data : this.dataList, order : j });
			}
		}
	} else { // 그외
		// 이미지 생성
		for( var j=activePage-1; j<=activePage+1; j++ ){
			if( j >= 0 && this.optResult({ opt : "division" }) === 1 && listCount.eq(j).find(".slide_view img").length < 1 || j >= 0 && this.optResult({ opt : "division" }) === 2 && listCount.eq(j).find(".slide_view img").length < 2 ){
				this.createImgLoad({ data : this.dataList, order : j });
			}
		}
	}

	// 자동넘김 설정될경우
	if( this.dataList.auto_pass ){
		this.autoPageTimer({ time : this.dataList.auto_pass });
	}

	// 리스트 활성화
	if( this.optResult({ opt : "adjust" }) ){ // 가로형
		listCount.css({ position : "absolute", left : 0, top : 0, opacity : 0 });
		listCount.eq(activePage).css({ position : "static", left : "auto", top : "auto", opacity : 1 });
	} else { // 세로형
		listCount.css({ position : "static", left : "auto", opacity : 1 });
		if( !optEvt ){
			$node.scrollTop($(window).height()*activePage);
		}

		// 스크롤 이벤트
		$node.unbind("scroll");
		$node.scroll(function(){
			for( var i=0; i<listCount.length; i++ ){
				if( $(this).scrollTop() > (($(window).height()*i)-(Math.floor($(window).height()/2))) &&
					$(this).scrollTop() < Math.floor(((i+1)*$(window).height())-Math.floor($(window).height()/2))
				){
					if( i != activePage ){
						// 방향 체크
						if( i > activePage ){
							that.$course = "next";
						} else {
							that.$course = "prev";
						}

						if( !currentNum ){
							that.progressMotion({ node : that.$content.find(".content_wrap_in"), course : i, evt : "scroll" });

							currentNum = true;
						} else {
							currentNum = false;
						}
					}
				}
			}
		});
	}

	// 하단 컨트럴영역
	this.pageCountArea({ active : activePage });
	// 하단 페이징
	this.pagingCount({ active : activePage+1 });

	// 데이터 병합
	this.dataOverwrite({ page_no : pageNum });
}
// 자동넘김
Viewer.prototype.autoPassPage = function(op){
	var pageNum = ( op && op.active ) ? op.active : this.dataList.auto_pass
	, $autoInput = this.$head.find(".js_auto_input .input-radio");

	// 선택한 Input 활성화
	for( var i=0, max=$autoInput.length; i<max; i++ ){
		if( $autoInput.eq(i).val() === pageNum ){
			$autoInput.eq(i).attr({ checked : true });
		}
	}

	// 자동넘김 시간타이머
	this.autoPageTimer({ time : pageNum });
}
// 페이지 넘김(기본, 역순)
Viewer.prototype.pageWayView = function(op){
	var way = ( op && op.active ) ? op.active : this.optResult({ opt : "course" })
	, listCount = this.optResult({ opt : "total" })
	, listCountLength = listCount.length
	, $orderInput = this.$head.find(".js_order_input input");

	// 초기
	if( !op ){
		$orderInput.eq(way-1).attr({ checked : true });
	} else { // 페이지 넘김 버튼 클릭
		// 이미지 세로형
		if( this.dataList.imgForm == "vertical" ){
			// 한장보기
			if( this.optResult({ opt : "division" }) === 1 ){
				for( var i=0; i<listCountLength; i++ ){
					if( i%2 === 0 ){
						if( listCount.eq(i+1).length ){
							listCount.eq(i).find("span").appendTo( listCount.eq(i+1) );
						}
					} else {
						if( listCount.eq(i-1).length ){
							listCount.eq(i).find("span").eq(0).appendTo( listCount.eq(i-1) );
						}
					}
				}
			} else { // 두장보기
				for( var i=0; i<listCountLength; i++ ){
					if( way === 1 ){
						listCount.eq(i).find("span").eq(0).before( listCount.eq(i).find("span").eq(1) );
					} else {
						listCount.eq(i).find("span").eq(1).after( listCount.eq(i).find("span").eq(0) );
					}
				}
			}
		} else { // 이미지 가로형
			// 한장보기
			if( this.optResult({ opt : "division" }) === 1 ){
				for( var i=0; i<listCountLength; i++ ){
					if( way === 1 ){
						if( i%2 === 0 ){
							listCount.eq(i+1).after( listCount.eq(i) );
						}
					} else {
						if( i%2 !== 0 ){
							listCount.eq(i).after( listCount.eq(i-1) );
						}
					}
				}
			}
		}
	}
}
// 1장, 2장보기 결과값 추출
Viewer.prototype.divisionView = function(op){
	var that = this
	, division = ( op && op.active ) ? op.active : this.optResult({ opt : "division" })
	, listCount = this.optResult({ opt : "total" })
	, listCountLength = listCount.length
	, $scrollWrap = this.$content.find(".content_wrap_in")
	, $autoInput = this.$head.find(".js_view_input input");

	// 초기 실행
	if( !op ){
		$autoInput.eq(division-1).attr({ checked : true });
	} else {
		// 페이징 내용 삭제
		this.$paging.html("");
		// 북마크 아이콘
		if( this.$bookmark.css("display") != "none" ){
			this.$bookmark.appendTo( this.$container );
		}

		// 한장보기
		if( division === 1 ){
			// 정방향
			if( this.optResult({ opt : "course" }) === 1 ){
				for( var i=0; i<this.optResult({ opt : "length" }); i++ ){
					// 이미지 세로형
					if( this.dataList.imgForm === "vertical" ){
						if( i < Math.floor(this.optResult({ opt : "length" })/2) ){
							var slides = $("<div />").addClass("slide").appendTo( this.$content.find(".content_wrap_in") );

							listCount.eq(i).find("span").eq(1).appendTo( slides );
							listCount.eq(i).after( slides );
						}
					} else {
						if( i < this.optResult({ opt : "length" }) ){
							var slides = $("<div />").addClass("slide").appendTo( this.$content.find(".content_wrap_in") );

							listCount.eq(i).find("span").eq(1).appendTo( slides );
							listCount.eq(i).after( slides );
						}
					}
				}
			} else {
				for( var i=0; i<this.optResult({ opt : "length" }); i++ ){
					if( this.dataList.imgForm == "vertical" ){
						if( i < Math.floor(this.optResult({ opt : "length" })/2) ){
							var slides = $("<div />").addClass("slide").appendTo( this.$content.find(".content_wrap_in") );

							listCount.eq(i).find("span").eq(0).appendTo( slides );
							listCount.eq(i).after( slides );
						}
					} else {
						if( i < this.optResult({ opt : "length" }) ){
							var slides = $("<div />").addClass("slide").appendTo( this.$content.find(".content_wrap_in") );

							listCount.eq(i).find("span").eq(0).appendTo( slides );
							listCount.eq(i).after( slides );
						}
					}
				}
			}

			// 리스트
			this.$contentList = this.$container.find(".slide");
			// 클래스 삭제
			this.$contentList.removeClass("slide_double");
			this.$contentList.removeClass("slide_full_double");

			// 전체 이미지 리사이즈
			this.imgAllResize();

			// 책갈피 아이콘 위치
			if( this.optResult({ opt : "bookmark" }) ){
				this.$contentList.eq(this.optResult({ opt : "bookmark" })).append( this.$bookmark );
			} else {
				this.$contentList.eq(this.optResult({ opt : "pageNo" })).append( this.$bookmark );
			}
		} else { // 2장보기
			for( var i=0; i<listCountLength; i++ ){
				if( i%2 != 0 ){
					listCount.eq(i-1).append( listCount.eq(i).find(".slide_view") );
					listCount.eq(i).remove();
				}
			}

			// 리스트
			this.$contentList = this.$container.find(".slide");
			// 클래스 추가
			this.$contentList.addClass("slide_double");

			// 전체 이미지 리사이즈
			this.imgAllResize();

			// 책갈피 아이콘 위치
			if( this.optResult({ opt : "bookmark" }) ){
				this.$contentList.eq(Math.floor(this.optResult({ opt : "bookmark" })/2)).append( this.$bookmark );
			} else {
				this.$contentList.eq(Math.floor(this.optResult({ opt : "pageNo" })/2)).append( this.$bookmark );
			}
		}

		// 가로, 세로뷰
		if( this.optResult({ opt : "adjust" }) ){
			this.progressMotion();
		} else {
			this.progressMotion({ node : this.$content.find(".content_wrap_in") });
		}
	}
}
// 배경색 설정
Viewer.prototype.backColor = function(op){
	var $button = $(".js_bgcolor_selc").find("img")
	, btnIndex = ( op && op.indexs ) ? op.indexs : 0
	, pageNum = ( op && op.active ) ? op.active : this.optResult({ opt : "back" });

	// 초기
	if( !op ){
		// 흰색
		if( pageNum === "W" ){
			// 컨텐츠 클래스추가(흰색)
			this.$container.addClass("view_backbg_white");
			// 아이콘 활성화
			$button[0].src = $button[0].src.replace("_off.gif", "_on.gif");
		} else if( pageNum === "G" ) { // 회색
			// 컨텐츠 클래스추가(회색)
			this.$container.addClass("view_backbg_gray");
			// 아이콘 활성화
			$button[1].src = $button[1].src.replace("_off.gif", "_on.gif");
		} else if( pageNum === "B" ) { // 검정
			// 컨텐츠 클래스추가(검정)
			this.$container.addClass("view_backbg_black");
			// 아이콘 활성화
			$button[2].src = $button[2].src.replace("_off.gif", "_on.gif");
		} else { // 흰색
			// 컨텐츠 클래스추가(흰색)
			this.$container.addClass("view_backbg_white");
			// 아이콘 활성화
			$button[0].src = $button[0].src.replace("_off.gif", "_on.gif");
		}
	} else { // 버튼 선택
		if( pageNum === "W" ){
			// 컨텐츠 클래스삭제
			this.$container.removeClass("view_backbg_gray");
			this.$container.removeClass("view_backbg_black");

			// 컨텐츠 클래스추가(흰색)
			this.$container.addClass("view_backbg_white");
		} else if( pageNum === "G" ) {
			// 컨텐츠 클래스삭제
			this.$container.removeClass("view_backbg_white");
			this.$container.removeClass("view_backbg_black");

			// 컨텐츠 클래스추가(회색)
			this.$container.addClass("view_backbg_gray");
		} else if( pageNum === "B" ) {
			// 컨텐츠 클래스삭제
			this.$container.removeClass("view_backbg_white");
			this.$container.removeClass("view_backbg_gray");

			// 컨텐츠 클래스추가(검정)
			this.$container.addClass("view_backbg_black");
		} else {
			// 컨텐츠 클래스삭제
			this.$container.removeClass("view_backbg_gray");
			this.$container.removeClass("view_backbg_black");

			// 컨텐츠 클래스추가(흰색)
			this.$container.addClass("view_backbg_white");
		}

		// 배경색설정 버튼 비활성화
		$button.each(function(){
			$(this)[0].src = $(this)[0].src.replace("_on.gif", "_off.gif");
		});
		// 배경색설정 선택 버튼 활성화
		$button[btnIndex].src = $button[btnIndex].src.replace("_off.gif", "_on.gif")
	}
}
// 기능(컨트럴바) 레이어 활성화 여부
Viewer.prototype.controllToggle = function(flag){
	if( flag ){
		this.$head.parent().stop().animate({ top : 0 }, 400);
		this.$menu.stop().animate({ bottom : 0 }, 400);
	} else {
		this.$head.parent().stop().animate({ top : -this.$head.parent().outerHeight() }, 400);
		this.$menu.stop().animate({ bottom : -this.$menu.outerHeight() }, 400);
	}
}
// 제목 및 뷰어 레이어 활성화 여부
Viewer.prototype.layerToggle = function(op){
	var $tMenu = op.tMenu
	, $fMenu = op.fMenu
	, $sMenu = op.sMenu
	, $active = op.active;

	// 부분 비활성화
	if( $active ){
		if( $tMenu == $active ){
			titleDisable({ btnTarget : $fMenu });
			titleDisable({ btnTarget : $sMenu });
		} else if( $fMenu == $active ){
			titleDisable({ btnTarget : $tMenu });
			titleDisable({ btnTarget : $sMenu });
		} else {
			titleDisable({ btnTarget : $tMenu });
			titleDisable({ btnTarget : $fMenu });
		}
	} else { // 전체 비활성화
		titleDisable({ btnTarget : $tMenu });
		titleDisable({ btnTarget : $fMenu });
		titleDisable({ btnTarget : $sMenu });
	}

	// 타이틀 활성화 여부
	function titleDisable(op){
		var $targer = op.btnTarget;

		// 타이틀 및 설정
		if( $($targer).parent().hasClass("title") ){
			if( $($targer).parent().hasClass("title_active") ){
				$($targer).parent().removeClass("title_active");
			}
		} else {
			$($targer).removeClass("btn_viewerSettings_active");
		}

		// 레이어 비활성화
		$($($targer).attr("href")).fadeOut();
	}
}
// 로딩바
Viewer.prototype.loadingBar = function(op){
	var $loading = $("#loading")
	, $loadingImg = $loading.find("img")
	, $loadingBg = $("#loading_bg")
	, count = 0;

	// 로딩바 활성화
	if( op.active === "show" ){
		if( $loading.length ){
			$loadingImg.hide();
			$loadingImg.eq(count).show();

			// 로딩바 중앙정렬
			$loading.css({ left : $(window).width()/2 - $loading.outerWidth()/2, top : $(window).height()/2 - $loading.outerHeight()/2 }).show();
			// 로딩바 배경 활성화
			$loadingBg.css({ opacity : 0.1 }).show();

			// 로딩바 움직임
			this.$loadingTimer = setInterval(function(){
				// 로딩이미지 숨김
				$loadingImg.hide();

				// Count 변수 적용
				if( count < $loadingImg.length-1 ){
					count++;
				} else {
					count = 0;
				}

				// 로딩이미지 활성화
				$loadingImg.eq(count).show();
			}, 50);
		}
	} else { // 로딩바 비활성화
		if( $loading.length ){
			$loading.hide();
			$loadingBg.hide();

			// 로딩바이미지 멈춤
			if( this.$loadingTimer ) clearInterval(this.$loadingTimer);
		}
	}
}
// 옵션별 결과값 추출
Viewer.prototype.optResult = function(op){
	var totalResult = null;

	switch( op.opt ){
		case "total" : // 전체리스트
			totalResult = this.$content.find(".slide");

			break;
		case "length" : // 이미지 갯수
			if( this.dataList.imgForm === "vertical" ){
				if( Number(this.dataList.pass_division) === 1 ){
					totalResult = this.dataList.file_list.length;
				} else {
					totalResult = Math.floor(this.dataList.file_list.length/2);
				}
			} else {
				if( Number(this.dataList.pass_division) === 1 ){
					totalResult = this.dataList.file_list.length*2;
				} else {
					totalResult = this.dataList.file_list.length-1;
				}
			}

			break;
		case "bookmark" : // 책갈피
			if( this.dataList.bookmark ){
				totalResult = Number(this.dataList.bookmark);
			} else {
				totalResult = "";
			}

			break;
		case "adjust" : // 가로, 세로뷰
			if( this.dataList.adjust === "W" ){
				totalResult = true;
			} else {
				totalResult = false;
			}

			break;
		case "auto" : // 자동넘김
			totalResult = Number(this.dataList.auto_pass);

			break;
		case "course" : // 넘김순서
			totalResult = Number(this.dataList.pass_way);
		
			break;
		case "division" : // 한장, 두장보기
			totalResult = Number(this.dataList.pass_division);

			break;
		case "back" : // 배경색
			totalResult = this.dataList.background;

			break;
		case "size" : // 이미지 사이즈
			this.$imgWidth = op.size.outerWidth();
			this.$imgHeight = op.size.outerHeight();

			break;
		case "pageNo" : // 현재 페이지
			totalResult = Number(this.dataList.page_no);

			break;
	}

	return totalResult;
}
// 입력 데이터 오버레이
Viewer.prototype.dataOverwrite = function(data){
	var saveData = $.extend({}, this.dataList, data);

	this.dataList = saveData;
}
// Ebook 뷰어 스크립트
var viewer = new Viewer({
	node : $("#viewer"),
	data : comicData
});
</script>

</body>
</html>
